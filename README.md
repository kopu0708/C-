# C-
C# 공부한거 모아두기 
## 스택과 힙 ## 
스택은 정적 메모리 할당에 사용되며 컴파일 시간에 크기가 정해진다.

함수 호출과 로컬 변수가 저장 함수가 종료되면 메모리가 자동으로 해제함

힙은 프로그램 실행 중에 동적으로 메모리 크기가 할당됨 

힙에 할당된 메모리는 누가 관리함? 내가 해야한다.

### 스택의 작동 원리 ###
가장 나중에 들어온 데이터가 가장 먼저 나간다. 이걸 LIFO(Last In First Out) 이라고 한다.

속도가 빠르다. 접근 방식도 단순하고 메모리 관리도 자동으로 해주고 편함 그런데 메모리 크기가 제한적이고. 이거 넘기면 스택 오버플로우 오류 생김

### 힙의 작동 원리 ###
프로그램 실행 중에 필요한 만큼만 할당하고 해체할 수 있다. 메모리 크기가 유동적이다.

다 사용한 메모리는 명시적으로 해체 하는게 좋다. 안하면 안됨?
안하면 프로그램 메모리 사용량이 누적되어 프로그램 성는이 저하된다. 메모리 누수라고도 함. 

근데 c#은 가비지 컬렉터가 주기적으로 더 이상 사용하지 않는 데이터를 수거해간다.

### 문자열 숫자로, 숫자를 문자열로 바꾸기 ###
c#에서는 문자열과 숫자 사이의 형 변환 방법을 Parse()라는 메소드로 한다. 이 메소드에 숫자로 변환할 문자열을 넘기면 숫자로 변환해준다.

int a = int.Parse("12345""); 이런 식이다.

숫자 형식의 데이터를 문자열로 바꾸는 방법도 있다. object로부터 물려받은 ToString() 메소드를 재정의(오버라이드) 했다.

int c = 12345;
string d = c.ToString();

이런 식이다.  연습해보자

### 상수와 열거 ## 
상수는 변수의 선언과 비슷하다 형식 앞에 const 키워드가 위치하고 상수가 가져야 하는 데이터를 반드시 대입해줘야 한다. 

const 자료형 상수명 = 값;

이렇게 선언한 상수는 변수와 똑같이 사용할 수 있다. 단 데이터를 변경할 수 없다.

Q.이게 왜 필요한가요?

A.프로그램에서 변경하면 안 되는 변수를 잊어버리고 실수로 변경하게 되면 프로그램이 많이 아프게 된다. 그런 실수를 없애기 위해서이다.

열거 형식은 여러 개의 상수를 정리해두는 것이다. 같은 범주에 속하는 상수를 여러 개 선언할 떄 유용하다. 

선언하는 방법은 

enum 열거_형식명 : 기반자료형 {상수1,상수2,상수3....} 

이런 식이다. 기반자료형은 정수 계열(byte, sbyte, short, ushort, int, uint, long, ulong, char)만 사용할 수 있으며 생략시 int를 기반자료형으로 사용한다.

enum DialogResult {Yes, no, CANCEL, CONFIRM, OK} 

이렇게 선언하면 차례대로 컴파일러가 0, 1, 2, 3 , 4 이런 값을 할당한다. 

열거 형식의 요소가 어떤 값을 가지는냐는 별 의미가 없고 각 요소가 중복되지 않는 값을 가지고 있는데 의미가 있기 때문이다.

DialogResult라는 열거 형식을 새롭게 만들었다. 그러므로 int나 float처럼 이 형식을 이용해 변수를 만들 수 있다. 

물론 담을 수 있는 데이터는 오직 위 형식의 요소들 뿐이다.

DialogResult result = DialogResult.YES; 

열거 형식의 변수를 선언하여 값을 대입하는 예이다.

### Nullable 형식 ### 
int 형식의 변수를 선언하면 4바이트의 메모리가 할당된다. c# 컴파일러는 이 메모리 공간이 비어있는 꼴을 못본다.

그런데 값이 비어있는 변수가 가끔 필요하다. 그럴 때 이 형식을 쓰면 된다. 선언 방법은

데이터 형식? 변수 이름;

이렇게 형식 뒤에 ?만 붙여주면 된다. 

모든 Nullable 형식은 HasValue와 Value 두가지 속성을 가지고 있다. 

HasValue 속성은 해당 변수가 값을 가지고 있는지 없는지를 나타내고, Value 속성은 변수에 담겨 있는 값을 나타낸다.

~~~
int? a = null;
Console.WriteLine(a.HasValue); // a는 null이므로 False 출력

a = 37;
Console.WriteLine(a.HasValue);// a는 37을 가지고 있으므로 true 출력
Console.WriteLine(a.Value); // 37을 출력
~~~
비어있는 변수에 Value 속성을 사용하면 CLR이 어쩌구 무슨 예외를 띄운다.

### Var ###
c#은 굉장히 깐깐하게 상수나 변수에 대해 형식 검사를 한다. var 키워들를 통해서 약한 형식의 검사를 하는 언어ㅢ 편리함도 지원한다.

var 사용하면 컴파일러가 알아서 해당 변수의 형식을 지정해준다. 그래서 반드시 선언과 동시에 초기화 시켜줘야 한다.

안그러면 컴파일러가 이게 무슨 형식인지 알 길이 없음

var a = 3 // a는 int 형식

참고로 var 키워드는 지역 변수로만 사용할 수 있다.

클래스의 필드를 선언할 때에는 반드시 명시적 형식을 선언해야 한다. 클래스의 필드는 선언과 같이 초기화하지 않는 경우가 대부분이라 컴파일러가 var로 선언하면 못알아 먹는다.

Q.object랑 뭐가 다른거임?

A.var는 컴파일러가 컴파일 할 때 타입을 추론해서 자료형을 정한다. 그리고 이건 바뀌지 않는다.

반대로 object는 런타임 내내 값이 바뀔 때 마다 유연하게 바뀐다. 
