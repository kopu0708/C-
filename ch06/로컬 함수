// 로컬 함수는 메소드 안에서 선언되어 쓰이는 함수이다. 부모 메소드의 자원을 모두 상속받아 사용할 수 있으며 외부에서는 접근이 안된다.
// 메소드 내부의 반복적인 작업을 하나의 이름 안에 묶어서 사용하는데 유용하다.
// 

using System;
using System.Collections.Generic;

public class StatsCalculator
{
    // C# 7.0 이상에서 사용 가능
    public void DisplayStatistics(IEnumerable<int> numbers)
    {
        // 1. 부모 메소드의 지역 변수 선언
        int sum = 0;
        int count = 0;

        // --- 로컬 함수 정의 ---
        // 이 함수는 부모의 'sum'과 'count' 변수를 직접 사용합니다.
        void UpdateStats(int number)
        {
            if (number > 0) // 간단한 로직이 추가될 수 있음
            {
                sum += number;
                count++;
            }
        }
        // --- 로컬 함수 끝 ---


        // 2. 주 로직: 리스트를 순회하며 로컬 함수 호출
        Console.WriteLine("통계 계산 시작:");
        foreach (int num in numbers)
        {
            // 복잡한 로직을 깔끔하게 함수 하나로 대체
            UpdateStats(num);
        }

        // 3. 로컬 함수에 의해 변경된 변수를 사용해 결과 출력
        double average = (count == 0) ? 0 : (double)sum / count;

        Console.WriteLine($"총 합계: {sum}");
        Console.WriteLine($"항목 개수: {count}");
        Console.WriteLine($"평 균: {average:F2}");
    }

    // 예제 실행
    public static void Main(string[] args)
    {
        StatsCalculator calculator = new StatsCalculator();
        List<int> data = new List<int> { 5, 10, -3, 8, 15, 0, 7 };

        calculator.DisplayStatistics(data);
    }
}
